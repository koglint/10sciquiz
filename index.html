<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
</head>
<body>
    <div id="question-container">
        <h2 id="question"></h2>
        <div id="options">
            <button id="optionA"></button>
            <button id="optionB"></button>
            <button id="optionC"></button>
            <button id="optionD"></button>
        </div>
        <p id="feedback"></p>
        <button id="next-button" style="display:none;">Next Question</button>
    </div>

    <script>
        // Function to fetch questions from the external HTML file
        async function loadQuestions() {
            try {
                const response = await fetch('questions.html');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const text = await response.text();
                console.log('Fetched text:', text);  // Debugging: Check if the file is fetched correctly
                const data = JSON.parse(new DOMParser().parseFromString(text, 'text/html').querySelector('#quiz-data').textContent);
                console.log('Parsed data:', data);  // Debugging: Check if the JSON is parsed correctly
                return data;
            } catch (error) {
                console.error('Failed to load questions:', error);
                return [];  // Return an empty array on failure
            }
        }

        // Load questions and start the quiz
        loadQuestions().then(quiz => {
            if (quiz.length === 0) {
                document.getElementById('question').innerText = "Failed to load questions.";
                return;
            }

            // Function to load a new question
            function loadQuestion() {
                const randomIndex = Math.floor(Math.random() * quiz.length);
                const questionData = quiz[randomIndex];

                document.getElementById('question').innerText = questionData.question;

                const buttons = document.querySelectorAll('#options button');
                buttons.forEach((btn, index) => {
                    const optionKey = Object.keys(questionData.options)[index];
                    const optionValue = Object.values(questionData.options)[index];
                    btn.innerText = `${optionKey}: ${optionValue}`;
                    btn.disabled = false;
                    btn.onclick = function () {
                        checkAnswer(optionKey, questionData);
                    };
                });

                document.getElementById('feedback').innerText = "";
                document.getElementById('next-button').style.display = 'none';
            }

            // Function to check the selected answer
            function checkAnswer(selected, questionData) {
                if (selected === questionData.correct) {
                    document.getElementById('feedback').innerText = "Correct! " + questionData.explanation;
                } else {
                    document.getElementById('feedback').innerText = "Incorrect! The correct answer is " + questionData.correct + ". " + questionData.explanation;
                }

                document.querySelectorAll('#options button').forEach(btn => btn.disabled = true);
                document.getElementById('next-button').style.display = 'block';
            }

            document.getElementById('next-button').onclick = loadQuestion;

            // Initial load of a question
            loadQuestion();
        });
    </script>
</body>
</html>
